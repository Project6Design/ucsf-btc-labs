.block-views-block-clinical-trials-block-listing {
  padding: $base-spacing*5 $base-spacing*5.5 $base-spacing*5;

  @include media($larger-screen-down) {
    padding: $base-spacing*5 $base-spacing*1.5 $base-spacing*5;
  }

  .form-validation-errors {
    position: fixed;
    top: 0;
    z-index: 999;
    bottom: 0;
    left: 0;
    right: 0;
    display: flex;
    background: rgba(0, 0, 0, 0.8);
    justify-content: center;
    align-items: center;
    color: white;
    flex-direction: column;
    display: none;

    .inner {
      max-width: 600px;
      background: $white;
      border-radius: 4px;
      padding: 60px;
      text-align: center;
      position: relative;
      color: $dark-blue;

      &:after {
        content: "";
        background: url('../../images/optimized/close-blue.svg') no-repeat center center;
        width: 30px;
        height: 30px;
        background-size: cover;
        position: absolute;
        top: 10px;
        right: 10px;
        cursor: pointer;
      }

    }

    .btn--primary {
      margin-top: 40px;
      cursor: pointer;
      margin-bottom: 0;
    }

    &.open {
      display: flex;
    }
  }

  .views-exposed-form {
    padding: 0;
    background: none;
    @include clearfix;

    .group-top {
      background-color: $light-blue;
      padding: $base-spacing*5 $base-spacing*4 $base-spacing*6;

      .js-form-item.js-form-type-textfield, .js-form-item.js-form-type-select {
        margin-right: $large-spacing*5;

          @include media($extra-large-screen-down) {
            margin-right: $large-spacing*2;
          }

          @include media($extra-large-screen-down) {
            display: block;
          }
      }

      .advanced-search {
        color: $dark-blue;
        font-family: $secondary-font-family;
        font-size: $fs-regular-medium;
        display: inline-block;
        position: relative;
        margin-top: 5px;

        @include media($larger-screen-down) {
          display: none;
        }

        &:after {
          content: "";
          background: url("../../images/optimized/advanced-search.svg") no-repeat center center;
          width: 50px;
          height: 40px;
          display: block;
          position: absolute;
          bottom: $small-spacing;
          right: -$base-spacing*4.5;
        }
      }
    }

    .js-form-item.js-form-type-textfield, .js-form-item.js-form-type-select {

      @include media($larger-screen-down) {
        width: 100%;
      }

      &.js-form-type-textfield {
        position: relative;
        margin-top: 0;
      }

      &.js-form-type-select {
        position: relative;
        margin-top: 0;
        margin-bottom: $base-spacing*4;

        @include media($larger-screen-down) {
          width: 100% !important;
          float: none !important;
          margin-left: 0 !important;
          margin-bottom: $base-spacing !important;
        }

        label {
          font-weight: bold;
        }

        select {
          font-family: "Granjon";
          font-size: $fs-small;
          color: $dark-blue;
        }
      }

      &:last-of-type {
        @include clearfix;
      }
    }

    .group-bottom {
      padding-top: $base-spacing*4;
      padding: $base-spacing*4 $large-spacing;
      position: relative;

      .form-sub-title {
        clear: both;
        font-family: $secondary-font-family;
        font-size: $fs-medium;
        text-align: center;
        padding: $base-spacing*5 0 $base-spacing*3 0;
        display: none;
        color: $dark-blue;
      }

      > .form-item.js-form-type-select {
        float: left;

        &:nth-child(-n+2) {
          width: 25%;
          margin-right: $large-spacing;

          @include media($extra-large-screen-down) {
            width: 45%; }
        }

        &:nth-child(1) {
          margin-left: $base-spacing*4;

          @include media($extra-large-screen-down) {
            margin-left: 0;
          }
        }

        &:nth-child(2) {
          width: 280px;

          @include media($extra-large-screen-down) {
            width: 45%;
          }
        }

        &:nth-child(3) {
          width: 38%;
          margin-right: 0;

          @include media($extra-large-screen-down) {
            width: 100%;
          }
        }

        &:nth-child(n+4) {
          display: none;
        }
      }

      fieldset {
        display: none;
      }

      .form-actions {
        display: none;
        justify-content: center;
      }

      .form-submit,
      #close-form {
        visibility: initial;
        margin: $large-spacing $base-spacing/2 $base-spacing*4 $base-spacing/2;
        padding: $base-spacing $base-spacing*4;
        background-color: $red;
        color: $white;
        line-height: 1;
        font-size: 18px;
        display: inline-block;
        border-radius: 5px;
        border: 2px solid $red;
        font-family: "Helvetica Bold";

        &:hover {
          background-color: $white;
          color: $red;
        }

        @include media($medium-screen-down) {
          padding: $small-spacing $base-spacing;
        }
      }

      &.open {
        transition: background-color 300ms linear;
        background-color: rgba(232,244,250,0.4);

        .group-checkboxes {
          display: flex;
          flex-wrap: wrap;
          clear: both;
					justify-content: center;
        }

        .form-actions {
          display: flex;
        }

        .form-sub-title {
          display: block;
        }

        &:before {
          content: "";
          border-right: 20px solid transparent;
          border-left: 20px solid transparent;
          border-bottom: 20px solid #F6FDFB;
          position: absolute;
          right: 25%;
          top: 0;
          transform: translateY(-100%);
        }

        .js-form-item.js-form-type-select {
          &:nth-child(n+4) {
            @include span-columns(4 of 12);
          }

          &:nth-child(5) {
            @include shift(2);
            margin-bottom: $base-spacing*4;
          }

          &:nth-child(6) {
            margin-bottom: $base-spacing*4;
          }
        }


        fieldset {
          display: block;
          float: none;
          margin: 0 0 $large-spacing;
          flex: 0 1 30%;


          &[id^='edit-field-clinical-trial-phase-target-id--wrapper'] {
            flex: 0 1 30%;

						@include media($large-screen-down) {
							flex: 0 1 auto;
						}
          }

          &[id^='edit-field-intervention-model-target-id--wrapper'] {
            flex: 0 1 30%;

						@include media($large-screen-down) {
							flex: 0 1 auto;
						}
          }

          &[id^='edit-field-treatment-modality-target-id--wrapper'] {
						flex: 0 1 40%;

						@include media($large-screen-down) {
							flex: 0 1 auto;
						}

            #edit-field-treatment-modality-target-id {
              column-count: 2;
              column-gap: 0;
            }
          }

          &[id^='edit-prior-treatments'] {
            flex: 0 1 60%;

						@include media($large-screen-down) {
							flex: 0 1 auto;
						}

            #edit-prior-treatments {
              column-count: 2;
              column-gap: 0;
            }
          }

          &[id^='edit-genetic-features'] {
            flex: 0 1 40%;

						@include media($large-screen-down) {
							flex: 0 1 auto;
						}

            #edit-genetic-features {
              column-count: 2;
              column-gap: 0;
            }
          }

          legend {
            color: $dark-blue;
            text-transform: uppercase;
            margin-bottom: $base-spacing;

            .required {
              color: $red;
              font-size: $fs-medium;
            }
          }

          .js-form-item {
            float: none;
            font-family: granjon;
            width: initial;

            label {
              font-size: $fs-small;
              text-transform: capitalize;
            }
          }
        }
      }
      @include media($larger-screen-down) {
        padding: $large-spacing*2 0;
      }
    }

  }

  .views-row {
    padding: 0 !important;
    position: relative;

    &:first-of-type {
      clear: both;
      margin-top: -$base-spacing !important;
      position: relative;
      padding: 0 !important;
    }

    article {
      padding-right: 180px !important;

      .field--name-body {
        min-height: 100px;
        font-size: $fs-small;

        p {
          font-size: 1em;
        }
      }

      @include media($medium-screen-down) {
        padding-right: 0 !important;
      }
    }
  }

  .clinical-trial--layout-teaser {
    clear: both;

    .clinical-trial__meta {
      width: 100px;
      text-align: center;
      position: absolute;
      right: 0;
      top: $large-spacing;

      //dotted border
      height: 220px;
      background-image: linear-gradient(black 20%, rgba(255,255,255,0) 0%);
      background-position: left;
      background-size: 2px 6px;
      background-repeat: repeat-y;

      .trial-meta.trial-meta__recruiting {
        svg {
          display: none;
        }
        &:after {
          content: "";
          background: url("../../images/recruiting-blue.svg") no-repeat center center;
          background-size: cover;
          width: 60px;
          height: 50px;
          display: inline-block;
        }
      }

      svg {
        fill: $blue;
        width: 45px;
        height: 45px;
      }

      @include media($medium-screen-down) {
        display: none;
      }
    }

    .clinical-trial__title {
      margin-bottom: $base-spacing;

      a {
        line-height: $fs-extra-small;
      }
    }

    .field--name-field-conditions {
      font-size: $fs-small;

      .field__label {
        display: inline-block;

        &:after {
          content: ":";
        }
      }

      .field__value-container {
        display: inline-block;

        .field__value {
          display: inline-block;

          &:after {
            content: ",";
          }

          &:last-of-type {
            &:after {
              content: "";
            }
          }
        }
      }
    }
  }
}
